/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{673:function(wa,ua,b){function la(){return!1}function na(z,ba,ha){if(!(ba in r))return!0;ba=r[ba];for(var aa=0;aa<ba.length;aa++){var ca=z;var fa=ba[aa];var pa=ha;if(fa.name in ca){var ja="",ma=!1;ca=ca[fa.name];switch(fa.type){case "s":ja="String";ma=Object(ia.isString)(ca);break;case "a":ja="Array";ma=Object(ia.isArray)(ca);break;case "n":ja="Number";ma=Object(ia.isNumber)(ca)&&Object(ia.isFinite)(ca);break;case "o":ja="Object",
ma=Object(ia.isObject)(ca)&&!Object(ia.isArray)(ca)}ma||pa.reject('Expected response field "'.concat(fa.name,'" to have type ').concat(ja));fa=ma}else pa.reject('Response missing field "'.concat(fa.name,'"')),fa=!1;if(!fa)return!1}return!0}function oa(z){for(var ba=0,ha=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ba<ha.length;ba++){var aa=ha[ba],ca=aa;aa=aa.charAt(0).toUpperCase()+aa.slice(1);z[ca]&&(Object.defineProperty(z,
aa,Object.getOwnPropertyDescriptor(z,ca)),delete z[ca])}return z}b.r(ua);var ka=b(0),ia=b(1);b.n(ia);var ea=b(2);wa=b(53);var x=b(38),y=b(692),h=b(140),e=b(584),f=b(55),w=b(266),n=function(){function z(){this.request=this.result=null;this.state=0;var ba=this;ba.promise=new Promise(function(ha,aa){ba.resolve=function(){if(0===ba.state||4===ba.state)ba.state=1,ba.result=arguments[0],ha.apply(null,arguments)};ba.reject=function(){if(0===ba.state||4===ba.state)ba.state=2,aa.apply(null,arguments)}})}z.prototype.jp=
function(){return 1===(this.state&1)};z.prototype.wNa=function(){return 2===(this.state&2)};z.prototype.hn=function(){return!this.wNa()&&!this.jp()};z.prototype.NMa=function(){return 4===(this.state&4)};z.prototype.B2=function(){this.state|=4};return z}(),a=function(){function z(){this.aB={};this.Sc=[]}z.prototype.pop=function(){var ba=this.Sc.pop();this.aB[ba.key]=void 0;return ba};z.prototype.push=function(ba,ha){ha={key:ba,data:ha};this.Sc.push(ha);this.aB[ba]=ha.data};z.prototype.contains=function(ba){return!!this.aB[ba]};
z.prototype.get=function(ba){return this.aB[ba]};z.prototype.set=function(ba,ha){var aa=this;this.aB[ba]=ha;this.Sc.forEach(function(ca,fa){ca.key===ba&&(aa.Sc[fa]=ca)})};z.prototype.remove=function(ba){var ha=this;this.aB[ba]=void 0;this.Sc.forEach(function(aa,ca){aa.key===ba&&ha.Sc.splice(ca,1)})};z.prototype.length=function(){return this.Sc.length};return z}(),r={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};b=function(){function z(ba,ha,aa){var ca=this;this.l3=this.xaa=!1;this.lk=this.eS=this.$C=this.Gg=this.FE=this.tu=this.EE=this.rs=
null;this.Jr=new n;this.bw=new n;this.iM=!1;this.bi=this.Lg=this.Mg=this.Ph=null;this.Bi=[];this.lN=[];this.cache={};this.timeStamp=0;this.gk=[];this.jj=[];this.cX=null;this.gaa=!1;this.mka=this.id=null;this.x_=this.mea=la;this.vi=0;this.YY=!1;this.Kga=1;this.qn={};this.yz=0;this.gC=new a;ha.endsWith("/")||(ha+="/");aa=aa||{};this.xaa=aa.disableWebsockets||!1;this.l3=aa.singleServerMode||!1;null!=aa.customQueryParameters&&Object(f.b)("wvsQueryParameters",aa.customQueryParameters);ha.endsWith("blackbox/")||
(ha+="blackbox/");this.rs=aa.uploadData||null;this.$C=aa.uriData||null;this.EE=aa.cacheKey||null;if(this.tu=aa.officeOptions||null)this.tu=oa(this.tu);this.Gg=aa.rasterizerOptions||null;this.FE=aa.cadOptions||null;this.lh=ha;this.BW=ba;this.Nu(!0);this.Vz=(new y.a(ha,null,this.ol())).HFa(!this.xaa,function(fa){ca.oQa(fa)},function(){return null},function(){ca.iM=!1},function(){ca.hVa()})}z.prototype.XAa=function(){var ba=this;return new Promise(function(ha,aa){var ca=new XMLHttpRequest,fa="".concat(ba.lh,
"ck");ca.open("GET",fa);ca.withCredentials=ba.ol();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?ha():aa())};ca.send()})};z.prototype.EXa=function(ba){this.mea=ba||la;this.x_=la};z.prototype.vya=function(){this.Cja();return this.Vz.zw()};z.prototype.Cja=function(){Object(ka.c)(this,void 0,void 0,function(){return Object(ka.e)(this,function(ba){switch(ba.label){case 0:return this.bw=new n,this.Jr=new n,this.iM=!1,this.id=null,this.gaa=!1,[4,this.XAa().catch(function(){})];
case 1:return ba.aa(),[2]}})})};z.prototype.hVa=function(){this.mea();this.Cja();this.Ph&&(this.Ph.hn()?this.rk(this.Ph.request):this.Ph.jp()&&this.x_(this.Ph.result.url,"pdf")&&(this.Ph=null,this.zja()));this.bi&&this.bi.hn()&&this.rk(this.bi.request);this.Mg&&this.Mg.hn()?this.rk(this.Mg.request):this.Lg&&this.Lg.hn()&&this.Oda();var ba;for(ba=0;ba<this.gk.length;ba++)this.gk[ba]&&(this.gk[ba].hn()?this.rk(this.gk[ba].request):this.gk[ba].jp()&&this.x_(this.gk[ba].result.url,"image")&&(this.gk[ba]=
null,this.EQ(Object(ia.uniqueId)(),ba)));for(ba=0;ba<this.jj.length;ba++)this.jj[ba]&&this.jj[ba].hn()&&!this.jj[ba].NMa()&&this.rk(this.jj[ba].request);for(ba=0;ba<this.Bi.length;ba++)this.Bi[ba]&&this.Bi[ba].hn()&&this.rk(this.Bi[ba].request)};z.prototype.LLa=function(){return this.iM?Promise.resolve():(this.iM=!0,this.timeStamp=Date.now(),this.Vz.NO())};z.prototype.f1a=function(){var ba=this,ha,aa,ca,fa,pa;return new Promise(function(ja,ma){if(ba.rs)ha=new FormData,ha.append("file",ba.rs.fileHandle,
ba.rs.fileHandle.name),ba.tu&&ha.append("officeOptions",JSON.stringify(ba.tu)),ba.Gg&&ha.append("rasterizerOptions",JSON.stringify(ba.Gg)),ba.FE&&ha.append("cadOptions",ba.FE.getJsonString()),ba.EE&&ha.append("cacheKey",ba.EE),aa=ba.rs.loadCallback,fa="upload",ca=ba.rs.extension;else if(ba.$C)ha={uri:ba.$C.uri,d7a:ba.$C.shareId},ha=Object.keys(ha).map(function(ra){return"".concat(ra,"=").concat(ha[ra]?encodeURIComponent(ha[ra]):"")}).join("&"),pa="application/x-www-form-urlencoded; charset=UTF-8",
aa=ba.$C.loadCallback,fa="url",ca=ba.$C.extension;else{ja();return}var sa=new XMLHttpRequest,qa=Object(x.l)(ba.lh,"AuxUpload");qa=Object(w.a)(qa,{type:fa,ext:ca});sa.open("POST",qa);sa.withCredentials=ba.ol();pa&&sa.setRequestHeader("Content-Type",pa);sa.addEventListener("load",function(){if(sa.readyState===sa.DONE&&200===sa.status){var ra=JSON.parse(sa.response);ba.BW=ra.uri;aa(ra);ja(ra)}});sa.addEventListener("error",function(){ma("".concat(sa.statusText," ").concat(JSON.stringify(sa)))});ba.rs&&
null!=ba.rs.onProgress&&(sa.upload.onprogress=function(ra){ba.rs.onProgress(ra)});sa.send(ha)})};z.prototype.TUa=function(ba){this.password=ba||null;this.Jr.jp()||(this.Jr=new n,this.rk({t:"pages"}));return this.Jr.promise};z.prototype.lI=function(ba){this.cX=ba||null;this.Jr.jp()||this.rk({t:"pages"});return this.Jr.promise};z.prototype.RE=function(ba){ba=Object.assign(ba,{uri:encodeURIComponent(this.BW)});this.cX&&(ba.ext=this.cX);this.lk&&(ba.c=this.lk);this.password&&(ba.pswd=this.password);this.EE&&
(ba.cacheKey=this.EE);this.tu&&(ba.officeOptions=this.tu);this.Gg&&(ba.rastOptions=this.Gg);this.FE&&(ba.cadOptions=this.FE.mImpl);return ba};z.prototype.cWa=function(){0<this.gC.length()&&10>=this.yz&&this.dWa(this.gC.pop().data)};z.prototype.Bxa=function(ba){0<this.gC.length()&&this.gC.contains(ba)&&this.gC.remove(ba)};z.prototype.rk=function(ba){ba=this.RE(ba);this.Vz.send(ba)};z.prototype.ika=function(ba,ha){10<this.yz?this.gC.push(ba,ha):(this.yz++,ba=this.RE(ha),this.Vz.send(ba))};z.prototype.dWa=
function(ba){this.yz++;ba=this.RE(ba);this.Vz.send(ba)};z.prototype.Dq=function(ba){return ba};z.prototype.lea=function(ba){this.l3&&ba?Object(ea.j)("Server failed health check. Single server mode ignoring check."):!this.Y4a&&ba&&3>=this.vi?(this.YY=!0,this.Vz.zw()):3<this.vi&&(this.l3=!0)};z.prototype.oQa=function(ba){var ha=this,aa=ba.data,ca=ba.err,fa=ba.t;switch(fa){case "upload":ca?this.g1a.reject(ca):this.g1a.resolve("Success");break;case "pages":ca?this.Jr.reject(ca):na(aa,fa,this.Jr)&&this.Jr.resolve(aa);
break;case "config":if(ca)this.bw.reject(ca);else if(na(aa,fa,this.bw)){this.lea(aa.unhealthy);aa.id&&(this.id=aa.id);if(aa.auth){var pa=Object(f.a)("wvsQueryParameters");pa.auth=aa.auth;Object(f.b)("wvsQueryParameters",pa)}aa.serverVersion&&(this.eS=aa.serverVersion,Object(ea.h)("[WebViewer Server] server version: ".concat(this.eS)));aa.serverID?(this.vi=aa.serverID===this.mka&&this.YY?this.vi+1:0,this.mka=aa.serverID):this.vi=0;this.YY=!1;this.bw.resolve(aa)}break;case "health":ca?this.bw.reject(ca):
na(aa,fa,this.bw)&&this.lea(aa.unhealthy);break;case "pdf":aa.url=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(aa.url)));ca?this.Ph.reject(ca):na(aa,fa,this.Ph)&&this.Ph.resolve(aa);break;case "ApString2Xod":aa.url=Object(w.a)("".concat(this.lh,"../data/").concat(encodeURI(aa.url)));ca?this.qn[aa.rID].reject(ca):na(aa,fa,this.qn[aa.rID])&&this.qn[aa.rID].resolve(aa);break;case "docmod":aa.url=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(aa.url)));ca?this.qn[aa.rID].reject(ca):na(aa,
fa,this.Ph)&&this.qn[aa.rID].resolve(aa);break;case "xod":if(ca)this.Mg&&this.Mg.hn()&&this.Mg.reject(ca),this.Lg&&this.Lg.hn()&&this.Lg.reject(ca);else if(aa.notFound)aa.noCreate||this.Mg&&this.Mg.hn()&&this.Mg.resolve(aa),this.Lg&&this.Lg.hn()&&this.Lg.resolve(aa);else{aa.url&&(aa.url=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(aa.url))));if(!this.Lg||this.Lg.jp())this.Lg=new n,this.Lg.request={t:"xod",noCreate:!0};this.Mg||(this.Mg=new n,this.Mg.request={t:"xod"});this.Lg.resolve(aa);
this.Mg.resolve(aa)}break;case "cAnnots":pa=this.bi;if(ca)pa.reject(ca);else if(na(aa,fa,pa)){pa.B2();var ja=[],ma=aa.annots;aa=function(ya){var za=ma[ya].s,Aa=ma[ya].e,Ga="".concat(sa.lh,"../").concat(encodeURI(ma[ya].xfdf)),Ba="true"===ma[ya].hasAppearance?Object(w.a)("".concat(Ga,".xodapp")):null,Ea=Object(ia.range)(za,Aa);ja[ya]={range:Ea,promise:new Promise(function(Na,Ka){var Oa=new XMLHttpRequest;Oa.open("GET",Object(w.a)(Ga));Oa.responseType="text";Oa.withCredentials=ha.ol();Oa.addEventListener("load",
function(){Oa.readyState===Oa.DONE&&200===Oa.status&&Na({ws:Oa.response,sq:Ba,range:Ea})});Oa.addEventListener("error",function(){Ka("".concat(Oa.statusText," ").concat(JSON.stringify(Oa)))});Oa.send()})}};var sa=this;for(ca=0;ca<ma.length;ca++)aa(ca);pa.resolve(ja)}break;case "annots":if(ca)this.bi.reject(ca);else if(na(aa,fa,this.bi)){this.bi.B2();var qa=new XMLHttpRequest;pa="".concat(this.lh,"../").concat(encodeURI(aa.url));var ra=aa.hasAppearance?Object(w.a)("".concat(pa,".xodapp")):null;qa.open("GET",
Object(w.a)(pa));qa.responseType="text";qa.withCredentials=this.ol();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ha.bi.resolve({ws:qa.response,sq:ra})});qa.addEventListener("error",function(){ha.bi.reject("".concat(qa.statusText," ").concat(JSON.stringify(qa)))});qa.send()}break;case "image":this.yz--;var ta=this.gk[aa.p];ca?ta.promise.reject(ca):na(aa,fa,ta)&&(ta.result=aa,ta.result.url=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(ta.result.url))),ta.resolve(ta.result));
break;case "tiles":this.yz--;ta=aa.rID;pa=this.Bi[ta];this.Bi[ta]=null;this.lN.push(ta);if(ca)pa.reject(ca);else if(na(aa,fa,pa)){for(ca=0;ca<aa.tiles.length;ca++)aa.tiles[ca]=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(aa.tiles[ca])));pa.resolve(aa)}break;case "text":ta=this.jj[aa.p];if(ca)ta.reject(ca);else if(na(aa,fa,ta)){ta.B2();var va=new XMLHttpRequest;aa=Object(w.a)("".concat(this.lh,"../").concat(encodeURI(aa.url)));va.open("GET",aa);va.withCredentials=this.ol();va.addEventListener("load",
function(){va.readyState===va.DONE&&200===va.status&&(ta.result=JSON.parse(va.response),ta.resolve(ta.result))});va.addEventListener("error",function(ya){ta.reject("".concat(va.statusText," ").concat(JSON.stringify(ya)))});va.send()}break;case "progress":"loading"===aa.t&&this.trigger(h.a.Events.DOCUMENT_LOADING_PROGRESS,[aa.bytes,aa.total])}this.cWa();!fa&&ba.echo&&ba&&"apstring2xod"===ba.echo.t&&(ba=ba.echo.reqID)&&(2<=parseInt(this.eS,10)?this.qn[ba].reject("Message unhandled by server"):this.qn[ba].reject())};
z.prototype.uGa=function(){return Object(ka.c)(this,void 0,void 0,function(){return Object(ka.e)(this,function(ba){switch(ba.label){case 0:return[4,this.LLa()];case 1:return ba.aa(),[2,this.bw.promise]}})})};z.prototype.VFa=function(ba){for(var ha=this,aa=new XMLHttpRequest,ca=Object(w.a)("".concat(this.lh,"aul"),{id:this.id}),fa=new FormData,pa={},ja=0;ja<ba.body.length;ja++){var ma=ba.body[ja];pa[ma.id]="".concat(ma.RU.w,";").concat(ma.RU.h);fa.append(ma.id,ma.RU.dataString)}ba={t:"apstring2xod",
reqID:this.Kga++,parts:pa};var sa=this.RE(ba);fa.append("msg",JSON.stringify(sa));this.qn[sa.reqID]=new n;aa.open("POST",ca);aa.withCredentials=this.ol;ca=new Promise(function(qa,ra){aa.onreadystatechange=function(){4===aa.readyState&&(200===aa.status?qa():ra("An error occurred while sending down appearance strings to the server"))}});aa.send(fa);return ca.then(function(){return ha.qn[sa.reqID].promise})};z.prototype.Bya=function(){var ba=this.eS.split("-")[0].split("."),ha=["1","5","9"];if(3!==ba.length)throw Error("Invalid WVS version length.");
if(3!==ha.length)throw Error("Invalid version length.");for(var aa=0;aa<ba.length;++aa){if(ha.length===aa||ba[aa]>ha[aa])return-1;if(ba[aa]!==ha[aa])return 1}return 0};z.prototype.Zv=function(){return 0>=this.Bya()};z.prototype.xX=function(){this.bi||(this.bi=new n,this.Zv()?this.bi.request={t:"cAnnots"}:this.bi.request={t:"annots"},this.rk(this.bi.request));return this.bi.promise};z.prototype.EQ=function(ba,ha){this.gk[ha]||(this.gk[ha]=new n,this.gk[ha].request={t:"image",p:ha},this.ika(ba,this.gk[ha].request));
return this.gk[ha].promise};z.prototype.UUa=function(ba){this.jj[ba]||(this.jj[ba]=new n,this.jj[ba].request={t:"text",p:ba},this.rk(this.jj[ba].request));return this.jj[ba].promise};z.prototype.VUa=function(ba,ha,aa,ca,fa){var pa=this.Bi.length;this.lN.length&&(pa=this.lN.pop());this.Bi[pa]=new n;this.Bi[pa].request={t:"tiles",p:ha,z:aa,r:ca,size:fa,rID:pa};this.ika(ba,this.Bi[pa].request);return this.Bi[pa].promise};z.prototype.zja=function(){this.Ph||(this.Ph=new n,this.Ph.request={t:"pdf"},this.gaa?
this.Ph.resolve({url:this.BW}):this.rk(this.Ph.request));return this.Ph.promise};z.prototype.Pca=function(ba){var ha=this,aa=new XMLHttpRequest,ca=Object(w.a)("".concat(this.lh,"aul"),{id:this.id}),fa=new FormData,pa={};ba.annots&&(pa.annots="xfdf");ba.watermark&&(pa.watermark="png");ba.redactions&&(pa.redactions="redact");pa={t:"docmod",reqID:this.Kga++,parts:pa};ba.print&&(pa.print=!0);var ja=this.RE(pa);fa.append("msg",JSON.stringify(ja));return Promise.all([ba.annots,ba.watermark,ba.redactions].map(function(ma){return Promise.resolve(ma)})).then(function(ma){var sa=
ma[0],qa=ma[1];ma=ma[2];sa&&fa.append("annots",sa);qa&&fa.append("watermark",qa);ma&&fa.append("redactions",ma);ha.qn[ja.reqID]=new n;aa.open("POST",ca);aa.withCredentials=ha.ol;sa=new Promise(function(ra,ta){aa.onreadystatechange=function(){4===aa.readyState&&(200===aa.status?ra():ta("An error occurred while sending down annotation data to the server"))}});aa.send(fa);return sa.then(function(){return ha.qn[ja.reqID].promise})})};z.prototype.Oda=function(){this.Lg||(this.Lg=new n,this.Lg.request=
{t:"xod",noCreate:!0},this.rk(this.Lg.request));return this.Lg.promise};z.prototype.WUa=function(){this.Mg||(this.Mg=new n,this.Mg.request={t:"xod"},this.rk(this.Mg.request));return this.Mg.promise};z.prototype.Fu=function(){return!0};z.prototype.request=function(){};z.prototype.Pia=function(){};z.prototype.abort=function(){for(var ba=0;ba<this.Bi.length;ba++)this.Bi[ba]&&(this.Bi[ba].resolve(null),this.Bi[ba]=null,this.lN.push(ba));this.close()};z.prototype.bR=function(ba){this.lk=this.lk||{};this.lk.headers=
ba};z.prototype.Nu=function(ba){this.lk=this.lk||{};this.lk.internal=this.lk.internal||{};this.lk.internal.withCredentials=ba};z.prototype.ol=function(){return this.lk&&this.lk.internal?this.lk.internal.withCredentials:null};z.prototype.getFileData=function(){return Promise.reject()};return z}();Object(wa.a)(b);Object(e.a)(b);Object(e.b)(b);ua["default"]=b},692:function(wa,ua,b){var la=b(0),na=b(2),oa=b(38),ka=b(55),ia=b(266),ea=b(113),x=function(){function h(e,f,w,n,a,r){void 0===w&&(w=null);void 0===
n&&(n=null);void 0===a&&(a=null);void 0===r&&(r=null);this.aZ=!1;this.vi=0;this.iH=8;this.Pja=3E3;this.yR=!1;this.w9=this.L1a(e);this.url=f?"".concat(this.w9,"/").concat(f):"".concat(this.w9,"/ws");this.hW=w;this.CH=n;this.PE=a;this.Aja=r}h.prototype.L1a=function(e){var f=e.indexOf("://"),w="ws://";0>f?f=0:(5===f&&(w="wss://"),f+=3);var n=e.lastIndexOf("/");0>n&&(n=e.length);return w+e.slice(f,n)};h.prototype.send=function(e){this.$u.readyState===WebSocket.CLOSED||this.aZ||this.$u.send(JSON.stringify(e))};
h.prototype.NO=function(){return Object(la.c)(this,void 0,void 0,function(){var e,f=this;return Object(la.e)(this,function(){e=Object(ka.a)("wvsQueryParameters");e.bcid=Object(oa.m)(8);Object(ka.b)("wvsQueryParameters",e);return[2,new Promise(function(w,n){var a=Object(ia.a)(f.url);f.yR=!1;f.$u=new WebSocket(a);f.$u.onopen=function(){f.aZ=!1;f.vi=0;f.CH&&f.CH();w()};f.$u.onerror=function(){f.aZ=!0};f.$u.onclose=function(r){r=r.code;f.PE&&f.PE();1E3!==r&&3E3!==r&&f.VKa(r,w,n)};f.$u.onmessage=function(r){r&&
r.data&&(r=JSON.parse(r.data),r.hb?f.send({hb:!0}):r.end?close():f.hW(r))}})]})})};h.prototype.VKa=function(e,f,w){Object(la.c)(this,void 0,void 0,function(){var n=this;return Object(la.e)(this,function(){if(this.yR)return f(),[2];this.vi<this.iH?setTimeout(function(){n.yR?f():(n.vi++,Object(na.j)("Failed to connect to server with WebSocket close code ".concat(e,". Reconnecting to WebViewer Server, attempt ").concat(n.vi," of ").concat(n.iH," ...")),n.NO().then(f).catch(w))},this.Pja):w(ea.a);return[2]})})};
h.prototype.zw=function(){var e;void 0===e&&(e=!1);this.vi=0;this.yR=!0;e?this.$u.close(3E3):this.$u.close();return Promise.resolve()};return h}(),y=function(){function h(e,f,w,n,a,r,z){void 0===n&&(n=null);void 0===a&&(a=null);void 0===r&&(r=null);void 0===z&&(z=null);this.vi=this.DQ=this.id=0;this.pG=!1;this.request=null;this.iH=8;this.Pja=3E3;e=this.rSa(e);this.url=f?"".concat(e,"/").concat(f,"pf"):"".concat(e,"/pf");this.YR=w;this.hW=n;this.CH=a;this.PE=r;this.Aja=z}h.prototype.rSa=function(e){var f=
e.lastIndexOf("/");0>f&&(f=e.length);return e.slice(0,f)};h.prototype.uAa=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&e.shift();for(var f=0;f<e.length;++f)e[f].endsWith(",")&&(e[f]=e[f].substr(0,e[f].length-1));return e};h.prototype.Oja=function(){return Object(la.c)(this,void 0,void 0,function(){var e=this;return Object(la.e)(this,function(f){switch(f.label){case 0:return this.vi++<this.iH?[4,new Promise(function(w){return setTimeout(function(){e.Aja();
e.NO();w()},3E3)})]:[3,2];case 1:f.aa(),f.label=2;case 2:return[2]}})})};h.prototype.CSa=function(e){Object(la.c)(this,void 0,void 0,function(){var f,w;return Object(la.e)(this,function(n){switch(n.label){case 0:f=null,w=0,n.label=1;case 1:if(!(w<e.length))return[3,6];f=JSON.parse(e[w]);if(!f)return[3,5];if(!f.end)return[3,2];close();return[3,5];case 2:if(!f.id||Number(f.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");this.zw();return[4,this.Oja()];case 3:return n.aa(),
[3,5];case 4:f.hb&&Number(f.id)===this.id?this.send({hb:!0}):this.pG||this.hW(f),n.label=5;case 5:return++w,[3,1];case 6:return[2]}})})};h.prototype.jQa=function(e){Object(la.c)(this,void 0,void 0,function(){var f,w,n;return Object(la.e)(this,function(a){switch(a.label){case 0:if(!(3<=e.readyState))return[3,2];try{f=e.responseText.length}catch(r){return Object(na.h)("caught exception"),[2]}if(0<f)try{w=this.uAa(e.responseText),0===this.id&&0<w.length&&(n=JSON.parse(w.shift()),this.id=n.id,this.vi=
0),this.CSa(w)}catch(r){}return this.pG?[3,2]:[4,this.sba()];case 1:a.aa(),a.label=2;case 2:return[2]}})})};h.prototype.sba=function(){return Object(la.c)(this,void 0,void 0,function(){var e=this;return Object(la.e)(this,function(){return[2,new Promise(function(f,w){function n(){return Object(la.c)(e,void 0,void 0,function(){return Object(la.e)(this,function(r){switch(r.label){case 0:w(),this.zw(),r.label=1;case 1:return this.pG&&this.vi<this.iH?[4,this.Oja()]:[3,3];case 2:return r.aa(),[3,1];case 3:return[2]}})})}
e.request=new XMLHttpRequest;e.request.withCredentials=e.YR;var a=Object(ia.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.DQ)}:{uc:String(e.DQ)});e.DQ++;e.request.open("GET",a,!0);e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.jQa(e.request)};e.request.addEventListener("error",n);e.request.addEventListener("timeout",n);e.request.addEventListener("load",function(){e.CH&&e.CH();f()});e.request.send()})]})})};
h.prototype.NO=function(){var e=Object(ka.a)("wvsQueryParameters");e.bcid=Object(oa.m)(8);Object(ka.b)("wvsQueryParameters",e);this.DQ=this.id=0;this.pG=!1;return this.sba()};h.prototype.send=function(e){var f=this,w=new XMLHttpRequest;w.withCredentials=this.YR;var n=Object(ia.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(e));w.addEventListener("error",function(){f.zw()});w.open("POST",n);w.setRequestHeader("X-Requested-With","XMLHttpRequest");w.send(a)};h.prototype.zw=
function(){this.id=0;this.pG=!0;this.PE&&this.PE();this.request.abort();return Promise.resolve()};return h}();wa=function(){function h(e,f,w){this.u$=e;this.target=f;this.YR=w}h.prototype.HFa=function(e,f,w,n,a){void 0===e&&(e=!0);void 0===f&&(f=null);void 0===w&&(w=null);void 0===n&&(n=null);void 0===a&&(a=null);return e?new x(this.u$,this.target,f,w,n,a):new y(this.u$,this.target,this.YR,f,w,n,a)};return h}();ua.a=wa}}]);}).call(this || window)
